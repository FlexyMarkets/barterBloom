import{i as w,Z as g,r as y,a7 as W,j as e,U as B,T as c,a8 as E,X as F,k as C,a9 as L,S as u,C as T,n as D,Y as M,e as R,o as z,B as I,q as b,aa as k,G as v,p as H,t as V,v as N}from"./index-6CrByzJE.js";import"./dayjs.min-BUFEucFe.js";import{C as q}from"./ContentCopyOutlined-DrVwpOUv.js";import{T as P}from"./Tooltip-Bs4HyFGU.js";import{T as O}from"./TextField-BEPpdMwB.js";import{D as U}from"./Divider-D0ipESKe.js";import"./Menu-DBL1DtMu.js";import"./List-U4WPYxpE.js";import"./Popper-YpxElLJk.js";import"./Select-B7N2BQVg.js";import"./FormControl-Ddqyf5_o.js";import"./dividerClasses-B6wz-LRU.js";const G=1*60*1e3;function Q(){const n=w(),{hasTimedOut:r,countdownEndTime:d}=g(a=>a.wallet),[x,t]=y.useState(0);y.useEffect(()=>{let a;if(r){t(0);return}let o=d;o||(o=Date.now()+G,n(W(o)));const l=()=>{const h=Date.now(),m=Math.max(0,Math.floor((o-h)/1e3));t(m),m<=0&&(clearInterval(a),n(E(!0)))};return l(),a=setInterval(l,1e3),()=>clearInterval(a)},[n,r,d]);const p=a=>{const o=String(Math.floor(a/60)).padStart(2,"0"),l=String(a%60).padStart(2,"0");return`${o}:${l}`};return e.jsxs(B,{sx:{display:"flex",gap:".5rem",alignItems:"center"},children:[e.jsx(c,{children:"Time Left:"}),e.jsx(c,{fontSize:"1.2rem",fontWeight:600,color:r?"error":"text.primary",children:r?"Time Out":p(x)})]})}function $(){const n=F("(max-width:500px)"),r=w(),{depositQRData:d,hasTimedOut:x}=g(f=>f.wallet),t=d,[p,a]=y.useState(!1),o=f=>{navigator.clipboard.writeText(f),a(!0),setTimeout(()=>{a(!1)},1500)},{register:l,handleSubmit:h,reset:m}=C({defaultValues:{transactionHash:""}}),[j,{isLoading:s}]=L(),A=async f=>{var S;try{const i=await j(f).unwrap();i!=null&&i.status&&(m(defaultValues),r(b({open:!0,message:i==null?void 0:i.message,severity:"success"})))}catch(i){i!=null&&i.data&&r(b({open:!0,message:((S=i==null?void 0:i.data)==null?void 0:S.message)||"Failed to submit. Please try again later.",severity:"error"}))}};return e.jsx(u,{mt:"2rem",children:e.jsx(T,{children:e.jsx(D,{sx:{boxShadow:"0 0px 0px 0 rgba(0, 0, 0, 0.19), 0 0px 8px 0 rgba(0, 0, 0, 0.19)",borderRadius:"2rem",height:"100%",padding:{xs:"1rem",md:"2rem"}},component:"form",onSubmit:h(A),children:e.jsxs(M,{sx:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",gap:"1rem",wordBreak:"break-word"},children:[e.jsx(c,{variant:"h6",children:"Scan QR Code to Complete Deposit"}),t?e.jsx("img",{src:t==null?void 0:t.data,alt:"Deposit QR",style:{maxWidth:"150px",width:"100%",height:"auto",border:"1px solid #ccc",borderRadius:"8px"}}):e.jsx(c,{color:"text.secondary",children:"QR Code not available"}),e.jsx(Q,{}),e.jsxs(u,{sx:{flexDirection:"row",alignItems:"center"},children:[e.jsxs(c,{children:["Deposit Address: ",t==null?void 0:t.depositAddress]}),e.jsx(P,{title:p?"Copied!":"Copy",children:e.jsx(R,{onClick:()=>o(t==null?void 0:t.depositAddress),children:e.jsx(q,{sx:{fontSize:"20px"}})})})]}),!x&&e.jsxs(u,{width:n?"100%":"400px",children:[e.jsx(z,{sx:{mb:".5rem"},children:"Transaction hash"}),e.jsx(O,{multiline:!0,...l("transactionHash",{require:!0}),size:"small",fullWidth:!0,placeholder:"Transaction hash",variant:"outlined"}),e.jsx(I,{variant:"contained",size:"small",type:"submit",disabled:s,sx:{textTransform:"capitalize",width:"5rem",mt:"1rem",boxShadow:"none",bgcolor:"primary.main",fontSize:"1rem",color:"white","&:hover":{boxShadow:"none"}},children:"Verify"})]})]})})})})}const X=V({amount:N().min(1,"Please type your deposit amount")});function Y(){const{countdownEndTime:n}=g(m=>m.wallet),r=w(),d={amount:""},{register:x,handleSubmit:t,reset:p,formState:{errors:a}}=C({resolver:H(X),defaultValues:d}),[o,{isLoading:l}]=k(),h=async m=>{var j;try{const s=await o(m).unwrap();s!=null&&s.status&&(p(d),r(b({open:!0,message:s==null?void 0:s.message,severity:"success"})))}catch(s){s!=null&&s.data&&r(b({open:!0,message:((j=s==null?void 0:s.data)==null?void 0:j.message)||"Failed to submit. Please try again later.",severity:"error"}))}};return e.jsx(u,{mt:"1.2rem",children:e.jsx(T,{children:e.jsxs(D,{sx:{padding:{xs:"1rem",sm:"2rem"},borderRadius:"2rem",boxShadow:"0 0px 0px 0 rgba(0, 0, 0, 0.19), 0 0px 8px 0 rgba(0, 0, 0, 0.19)"},children:[e.jsx(c,{variant:"h6",m:{xs:"1rem",sm:"0"},children:"Fill details"}),e.jsx(U,{sx:{my:"1.2rem"}}),e.jsxs(u,{gap:"2rem",component:"form",onSubmit:t(h),children:[e.jsx(v,{container:!0,size:12,spacing:3,children:e.jsxs(v,{item:!0,size:{xs:12,sm:6},children:[e.jsx(z,{sx:{mb:".5rem"},children:"Amount to be deposit"}),e.jsx(O,{...x("amount",{require:!0}),size:"small",fullWidth:!0,placeholder:"Amount to be deposit",variant:"outlined"}),a.amount&&e.jsx(c,{color:"error",children:a.amount.message})]})}),e.jsx(I,{variant:"contained",size:"small",type:"submit",disabled:l||n,sx:{textTransform:"capitalize",width:"5rem",boxShadow:"none",bgcolor:"primary.main",fontSize:"1rem",color:"white","&:hover":{boxShadow:"none"}},children:"Submit"})]})]})})})}function le(){const{depositQRData:n}=g(r=>r.wallet);return e.jsxs(u,{mt:"100px",children:[e.jsx(T,{children:e.jsx(c,{variant:"h4",fontWeight:"bold",mb:"2rem",children:"Deposit Balance"})}),e.jsx(Y,{}),n&&e.jsx($,{})]})}export{le as default};
