import{i as S,aa as j,r as w,j as e,W as R,T as m,ab as B,$ as F,k as I,ac as L,S as x,C as z,a0 as M,e as N,n as O,B as W,p as b,ad as k,G as D,o as H,q as V,t as E}from"./index-CgyuNoUm.js";import"./dayjs.min-HDYBXuod.js";import{C as _}from"./ContentCopyOutlined-e-2PDAdW.js";import{C as T}from"./Container-_NoZxzfG.js";import{T as q}from"./Tooltip-CVeNogE2.js";import{T as A}from"./TextField-BvQ47MxP.js";import{D as P}from"./Divider-nbmpb8iA.js";import"./Menu-MxIZnY_u.js";import"./List-CWH19mYs.js";import"./Popper-B0d16zhm.js";import"./Select-kK_Y15Qv.js";import"./FormControl-CWe92_-y.js";import"./dividerClasses-C2UfgC6D.js";const v="countdown_end_time",Q=15*60*1e3;function U(){const l=S(),o=j(r=>r.wallet.hasTimedOut),[d,c]=w.useState(0);w.useEffect(()=>{let r;if(o){c(0);return}let a=localStorage.getItem(v);a?a=parseInt(a,10):(a=Date.now()+Q,localStorage.setItem(v,a));const n=()=>{const p=Date.now(),u=Math.max(0,Math.floor((a-p)/1e3));c(u),u<=0&&(clearInterval(r),l(B(!0)))};return n(),r=setInterval(n,1e3),()=>clearInterval(r)},[l,o]);const s=r=>{const a=String(Math.floor(r/60)).padStart(2,"0"),n=String(r%60).padStart(2,"0");return`${a}:${n}`};return e.jsxs(R,{sx:{display:"flex",gap:".5rem",alignItems:"center"},children:[e.jsx(m,{children:"Time Left:"}),e.jsx(m,{fontSize:"1.2rem",fontWeight:600,color:o?"error":"text.primary",children:o?"Time Out":s(d)})]})}function $(){const l=F("(max-width:500px)"),o=S(),{depositQRData:d,hasTimedOut:c}=j(f=>f.wallet),s=d,[r,a]=w.useState(!1),n=f=>{navigator.clipboard.writeText(f),a(!0),setTimeout(()=>{a(!1)},1500)},{register:p,handleSubmit:u,reset:y}=I({defaultValues:{transactionHash:""}}),[h,{isLoading:g}]=L(),t=async f=>{var C;try{const i=await h(f).unwrap();i!=null&&i.status&&(y(defaultValues),o(b({open:!0,message:i==null?void 0:i.message,severity:"success"})))}catch(i){i!=null&&i.data&&o(b({open:!0,message:((C=i==null?void 0:i.data)==null?void 0:C.message)||"Failed to submit. Please try again later.",severity:"error"}))}};return e.jsx(x,{mt:"2rem",children:e.jsx(T,{children:e.jsx(z,{sx:{boxShadow:"0 0px 0px 0 rgba(0, 0, 0, 0.19), 0 0px 8px 0 rgba(0, 0, 0, 0.19)",borderRadius:"2rem",height:"100%",padding:{xs:"1rem",md:"2rem"}},component:"form",onSubmit:u(t),children:e.jsxs(M,{sx:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",gap:"1rem",wordBreak:"break-word"},children:[e.jsx(m,{variant:"h6",children:"Scan QR Code to Complete Deposit"}),s?e.jsx("img",{src:s==null?void 0:s.data,alt:"Deposit QR",style:{maxWidth:"150px",width:"100%",height:"auto",border:"1px solid #ccc",borderRadius:"8px"}}):e.jsx(m,{color:"text.secondary",children:"QR Code not available"}),e.jsx(U,{}),e.jsxs(x,{sx:{flexDirection:"row",alignItems:"center"},children:[e.jsxs(m,{children:["Deposit Address: ",s==null?void 0:s.depositAddress]}),e.jsx(q,{title:r?"Copied!":"Copy",children:e.jsx(N,{onClick:()=>n(s==null?void 0:s.depositAddress),children:e.jsx(_,{sx:{fontSize:"20px"}})})})]}),!c&&e.jsxs(x,{width:l?"100%":"400px",children:[e.jsx(O,{sx:{mb:".5rem"},children:"Transaction hash"}),e.jsx(A,{multiline:!0,...p("transactionHash",{require:!0}),size:"small",fullWidth:!0,placeholder:"Transaction hash",variant:"outlined"}),e.jsx(W,{variant:"contained",size:"small",type:"submit",disabled:g,sx:{textTransform:"capitalize",width:"5rem",mt:"1rem",boxShadow:"none",bgcolor:"primary.main",fontSize:"1rem",color:"white","&:hover":{boxShadow:"none"}},children:"Verify"})]})]})})})})}const G=V({amount:E().min(1,"Please type your deposit amount")});function K(){const{depositQRData:l,hasTimedOut:o}=j(h=>h.wallet),d=S(),c={amount:""},{register:s,handleSubmit:r,reset:a,formState:{errors:n}}=I({resolver:H(G),defaultValues:c}),[p,{isLoading:u}]=k(),y=async h=>{var g;try{const t=await p(h).unwrap();t!=null&&t.status&&(a(c),d(b({open:!0,message:t==null?void 0:t.message,severity:"success"})))}catch(t){t!=null&&t.data&&d(b({open:!0,message:((g=t==null?void 0:t.data)==null?void 0:g.message)||"Failed to submit. Please try again later.",severity:"error"}))}};return e.jsx(x,{mt:"1.2rem",children:e.jsx(T,{children:e.jsxs(z,{sx:{padding:{xs:"1rem",sm:"2rem"},borderRadius:"2rem",boxShadow:"0 0px 0px 0 rgba(0, 0, 0, 0.19), 0 0px 8px 0 rgba(0, 0, 0, 0.19)"},children:[e.jsx(m,{variant:"h6",m:{xs:"1rem",sm:"0"},children:"Fill details"}),e.jsx(P,{sx:{my:"1.2rem"}}),e.jsxs(x,{gap:"2rem",component:"form",onSubmit:r(y),children:[e.jsx(D,{container:!0,size:12,spacing:3,children:e.jsxs(D,{item:!0,size:{xs:12,sm:6},children:[e.jsx(O,{sx:{mb:".5rem"},children:"Amount to be deposit"}),e.jsx(A,{...s("amount",{require:!0}),size:"small",fullWidth:!0,placeholder:"Amount to be deposit",variant:"outlined"}),n.amount&&e.jsx(m,{color:"error",children:n.amount.message})]})}),l&&o&&e.jsx(W,{variant:"contained",size:"small",type:"submit",disabled:u,sx:{textTransform:"capitalize",width:"5rem",boxShadow:"none",bgcolor:"primary.main",fontSize:"1rem",color:"white","&:hover":{boxShadow:"none"}},children:"Submit"})]})]})})})}function me(){const{depositQRData:l}=j(o=>o.wallet);return e.jsxs(x,{mt:"100px",children:[e.jsx(T,{children:e.jsx(m,{variant:"h4",fontWeight:"bold",mb:"2rem",children:"Deposit Balance"})}),e.jsx(K,{}),l&&e.jsx($,{})]})}export{me as default};
