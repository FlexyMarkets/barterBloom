import{r as u,j as e,Z as C,T as i,aa as y,S as c,C as w,a3 as D,e as I,i as v,k as O,af as _,G as b,n as z,B as A,o as F,p as S,q as E,t as W}from"./index-DSQ-3O48.js";import"./dayjs.min-B0d50YWh.js";import{C as B}from"./ContentCopyOutlined-BM-xT7qa.js";import{C as g}from"./Container-CKS2abll.js";import{T as L}from"./Tooltip-vfnjTcC9.js";import{D as N}from"./Divider-D2RQ6X5C.js";import{T as R}from"./TextField-_bQE5U9w.js";import"./index-DwFg_eq3.js";import"./Popper-B5MBiZVf.js";import"./dividerClasses-Bt8tkvUP.js";import"./Select-Bv15Tg3R.js";import"./List-BUk8UaV_.js";import"./FormControl-DDBdLatC.js";const f="countdown_end_time",T="countdown_has_timed_out",k=15*60*1e3;function M(){const[a,t]=u.useState(0),[m,n]=u.useState(!1);u.useEffect(()=>{if(localStorage.getItem(T)==="true"){n(!0);return}let r=localStorage.getItem(f);r?r=parseInt(r,10):(r=Date.now()+k,localStorage.setItem(f,r));let l;const p=()=>{const h=Date.now(),x=Math.max(0,Math.floor((r-h)/1e3));t(x),x<=0&&(clearInterval(l),n(!0),localStorage.removeItem(f),localStorage.setItem(T,"true"))};return p(),l=setInterval(p,1e3),()=>clearInterval(l)},[]);const d=o=>{const r=String(Math.floor(o/60)).padStart(2,"0"),l=String(o%60).padStart(2,"0");return`${r}:${l}`};return e.jsxs(C,{sx:{display:"flex",gap:".5rem",alignItems:"center"},children:[e.jsx(i,{children:"Time Left:"}),e.jsx(i,{fontSize:"1.2rem",fontWeight:600,color:m?"error":"text.primary",children:m?"Time Out":d(a)})]})}function U(){const{depositQRData:a}=y(o=>o.wallet),t=a;console.log(t);const[m,n]=u.useState(!1),d=o=>{navigator.clipboard.writeText(o),n(!0),setTimeout(()=>{n(!1)},1500)};return e.jsx(c,{mt:"2rem",children:e.jsx(g,{children:e.jsx(w,{sx:{boxShadow:"0 0px 0px 0 rgba(0, 0, 0, 0.19), 0 0px 8px 0 rgba(0, 0, 0, 0.19)",borderRadius:"2rem",height:"100%",padding:{xs:"1rem",md:"2rem"}},children:e.jsxs(D,{sx:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",gap:"1rem",wordBreak:"break-word"},children:[e.jsx(i,{variant:"h6",children:"Scan QR Code to Complete Deposit"}),t?e.jsx("img",{src:t==null?void 0:t.data,alt:"Deposit QR",style:{maxWidth:"150px",width:"100%",height:"auto",border:"1px solid #ccc",borderRadius:"8px"}}):e.jsx(i,{color:"text.secondary",children:"QR Code not available"}),e.jsx(M,{}),e.jsxs(c,{sx:{flexDirection:"row",alignItems:"center"},children:[e.jsxs(i,{children:["Deposit Address: ",t==null?void 0:t.depositAddress]}),e.jsx(L,{title:m?"Copied!":"Copy",children:e.jsx(I,{onClick:()=>d(t==null?void 0:t.depositAddress),children:e.jsx(B,{sx:{fontSize:"20px"}})})})]})]})})})})}const G=E({amount:W().min(1,"Please type your deposit amount")});function q(){const a=v(),t={amount:""},{register:m,handleSubmit:n,setError:d,reset:o,formState:{errors:r}}=O({resolver:F(G),defaultValues:t}),[l,{isLoading:p}]=_(),h=async x=>{var j;try{const s=await l(x).unwrap();s!=null&&s.status&&(o(t),a(S({open:!0,message:s==null?void 0:s.message,severity:"success"})))}catch(s){s!=null&&s.data&&a(S({open:!0,message:((j=s==null?void 0:s.data)==null?void 0:j.message)||"Failed to submit. Please try again later.",severity:"error"}))}};return e.jsx(c,{mt:"1.2rem",children:e.jsx(g,{children:e.jsxs(w,{sx:{padding:{xs:"1rem",sm:"2rem"},borderRadius:"2rem",boxShadow:"0 0px 0px 0 rgba(0, 0, 0, 0.19), 0 0px 8px 0 rgba(0, 0, 0, 0.19)"},children:[e.jsx(i,{variant:"h6",m:{xs:"1rem",sm:"0"},children:"Fill details"}),e.jsx(N,{sx:{my:"1.2rem"}}),e.jsxs(c,{gap:"2rem",component:"form",onSubmit:n(h),children:[e.jsx(b,{container:!0,size:12,spacing:3,children:e.jsxs(b,{item:!0,size:{xs:12,sm:6},children:[e.jsx(z,{sx:{mb:".5rem"},children:"Amount to be deposit"}),e.jsx(R,{...m("amount",{require:!0}),size:"small",fullWidth:!0,placeholder:"Amount to be deposit",variant:"outlined"}),r.amount&&e.jsx(i,{color:"error",children:r.amount.message})]})}),e.jsx(A,{variant:"contained",size:"small",type:"submit",disabled:p,sx:{textTransform:"capitalize",width:"5rem",boxShadow:"none",bgcolor:"primary.main",fontSize:"1rem",color:"white","&:hover":{boxShadow:"none"}},children:"Submit"})]})]})})})}function re(){const{depositQRData:a}=y(t=>t.wallet);return e.jsxs(c,{mt:"100px",children:[e.jsx(g,{children:e.jsx(i,{variant:"h4",fontWeight:"bold",mb:"2rem",children:"Deposit Balance"})}),e.jsx(q,{}),a&&e.jsx(U,{})]})}export{re as default};
