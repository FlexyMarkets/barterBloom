import{r as f,a as Q,g as J,aK as ue,u as X,j as t,s as D,b as ee,x as F,d as te,D as pe,m as ae,e as M,N as me,h as se,S as $,C as oe,T as G,q,t as z,i as Y,k as _,o as Z,aL as ge,aM as xe,aN as he,G as O,n as L,O as N,I as U,B as V,p as S,aO as fe,aP as be,f as re,a2 as ne,a3 as ie,aQ as we}from"./index-DCfUnDlJ.js";import{C as H}from"./Container-BOcy6J80.js";import{A as ve}from"./Avatar-Bcc5m5Nf.js";import{T as ye}from"./TextField-DeRWmHW-.js";import"./Select-DldwQV_j.js";import"./List-BY8cVE4T.js";import"./FormControl-CvsVtrqC.js";function Pe(e){return f.Children.toArray(e).filter(a=>f.isValidElement(a))}function je(e){return J("MuiToggleButton",e)}const W=Q("MuiToggleButton",["root","disabled","selected","standard","primary","secondary","sizeSmall","sizeMedium","sizeLarge","fullWidth"]),le=f.createContext({}),de=f.createContext(void 0);function Be(e,a){return a===void 0||e===void 0?!1:Array.isArray(a)?a.includes(e):e===a}const Ce=e=>{const{classes:a,fullWidth:n,selected:u,disabled:c,size:m,color:p}=e,x={root:["root",u&&"selected",c&&"disabled",n&&"fullWidth",`size${F(m)}`,p]};return te(x,je,a)},Te=D(pe,{name:"MuiToggleButton",slot:"Root",overridesResolver:(e,a)=>{const{ownerState:n}=e;return[a.root,a[`size${F(n.size)}`]]}})(ae(({theme:e})=>({...e.typography.button,borderRadius:(e.vars||e).shape.borderRadius,padding:11,border:`1px solid ${(e.vars||e).palette.divider}`,color:(e.vars||e).palette.action.active,[`&.${W.disabled}`]:{color:(e.vars||e).palette.action.disabled,border:`1px solid ${(e.vars||e).palette.action.disabledBackground}`},"&:hover":{textDecoration:"none",backgroundColor:e.vars?`rgba(${e.vars.palette.text.primaryChannel} / ${e.vars.palette.action.hoverOpacity})`:M(e.palette.text.primary,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},variants:[{props:{color:"standard"},style:{[`&.${W.selected}`]:{color:(e.vars||e).palette.text.primary,backgroundColor:e.vars?`rgba(${e.vars.palette.text.primaryChannel} / ${e.vars.palette.action.selectedOpacity})`:M(e.palette.text.primary,e.palette.action.selectedOpacity),"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.text.primaryChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:M(e.palette.text.primary,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?`rgba(${e.vars.palette.text.primaryChannel} / ${e.vars.palette.action.selectedOpacity})`:M(e.palette.text.primary,e.palette.action.selectedOpacity)}}}}},...Object.entries(e.palette).filter(me()).map(([a])=>({props:{color:a},style:{[`&.${W.selected}`]:{color:(e.vars||e).palette[a].main,backgroundColor:e.vars?`rgba(${e.vars.palette[a].mainChannel} / ${e.vars.palette.action.selectedOpacity})`:M(e.palette[a].main,e.palette.action.selectedOpacity),"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette[a].mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:M(e.palette[a].main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?`rgba(${e.vars.palette[a].mainChannel} / ${e.vars.palette.action.selectedOpacity})`:M(e.palette[a].main,e.palette.action.selectedOpacity)}}}}})),{props:{fullWidth:!0},style:{width:"100%"}},{props:{size:"small"},style:{padding:7,fontSize:e.typography.pxToRem(13)}},{props:{size:"large"},style:{padding:15,fontSize:e.typography.pxToRem(15)}}]}))),Se=f.forwardRef(function(a,n){const{value:u,...c}=f.useContext(le),m=f.useContext(de),p=ue({...c,selected:Be(a.value,u)},a),x=X({props:p,name:"MuiToggleButton"}),{children:C,className:y,color:b="standard",disabled:P=!1,disableFocusRipple:w=!1,fullWidth:s=!1,onChange:g,onClick:j,selected:o,size:T="medium",value:B,...E}=x,R={...x,color:b,disabled:P,disableFocusRipple:w,fullWidth:s,size:T},k=Ce(R),A=l=>{j&&(j(l,B),l.defaultPrevented)||g&&g(l,B)},i=m||"";return t.jsx(Te,{className:ee(c.className,k.root,y,i),disabled:P,focusRipple:!w,ref:n,onClick:A,onChange:g,value:B,ownerState:R,"aria-pressed":o,...E,children:C})});function $e(e){return J("MuiToggleButtonGroup",e)}const d=Q("MuiToggleButtonGroup",["root","selected","horizontal","vertical","disabled","grouped","groupedHorizontal","groupedVertical","fullWidth","firstButton","lastButton","middleButton"]),ze=e=>{const{classes:a,orientation:n,fullWidth:u,disabled:c}=e,m={root:["root",n,u&&"fullWidth"],grouped:["grouped",`grouped${F(n)}`,c&&"disabled"],firstButton:["firstButton"],lastButton:["lastButton"],middleButton:["middleButton"]};return te(m,$e,a)},Oe=D("div",{name:"MuiToggleButtonGroup",slot:"Root",overridesResolver:(e,a)=>{const{ownerState:n}=e;return[{[`& .${d.grouped}`]:a.grouped},{[`& .${d.grouped}`]:a[`grouped${F(n.orientation)}`]},{[`& .${d.firstButton}`]:a.firstButton},{[`& .${d.lastButton}`]:a.lastButton},{[`& .${d.middleButton}`]:a.middleButton},a.root,n.orientation==="vertical"&&a.vertical,n.fullWidth&&a.fullWidth]}})(ae(({theme:e})=>({display:"inline-flex",borderRadius:(e.vars||e).shape.borderRadius,variants:[{props:{orientation:"vertical"},style:{flexDirection:"column",[`& .${d.grouped}`]:{[`&.${d.selected} + .${d.grouped}.${d.selected}`]:{borderTop:0,marginTop:0}},[`& .${d.firstButton},& .${d.middleButton}`]:{borderBottomLeftRadius:0,borderBottomRightRadius:0},[`& .${d.lastButton},& .${d.middleButton}`]:{marginTop:-1,borderTop:"1px solid transparent",borderTopLeftRadius:0,borderTopRightRadius:0},[`& .${d.lastButton}.${W.disabled},& .${d.middleButton}.${W.disabled}`]:{borderTop:"1px solid transparent"}}},{props:{fullWidth:!0},style:{width:"100%"}},{props:{orientation:"horizontal"},style:{[`& .${d.grouped}`]:{[`&.${d.selected} + .${d.grouped}.${d.selected}`]:{borderLeft:0,marginLeft:0}},[`& .${d.firstButton},& .${d.middleButton}`]:{borderTopRightRadius:0,borderBottomRightRadius:0},[`& .${d.lastButton},& .${d.middleButton}`]:{marginLeft:-1,borderLeft:"1px solid transparent",borderTopLeftRadius:0,borderBottomLeftRadius:0},[`& .${d.lastButton}.${W.disabled},& .${d.middleButton}.${W.disabled}`]:{borderLeft:"1px solid transparent"}}}]}))),Re=f.forwardRef(function(a,n){const u=X({props:a,name:"MuiToggleButtonGroup"}),{children:c,className:m,color:p="standard",disabled:x=!1,exclusive:C=!1,fullWidth:y=!1,onChange:b,orientation:P="horizontal",size:w="medium",value:s,...g}=u,j={...u,disabled:x,fullWidth:y,orientation:P,size:w},o=ze(j),T=f.useCallback((i,l)=>{if(!b)return;const v=s&&s.indexOf(l);let r;s&&v>=0?(r=s.slice(),r.splice(v,1)):r=s?s.concat(l):[l],b(i,r)},[b,s]),B=f.useCallback((i,l)=>{b&&b(i,s===l?null:l)},[b,s]),E=f.useMemo(()=>({className:o.grouped,onChange:C?B:T,value:s,size:w,fullWidth:y,color:p,disabled:x}),[o.grouped,C,B,T,s,w,y,p,x]),R=Pe(c),k=R.length,A=i=>{const l=i===0,v=i===k-1;return l&&v?"":l?o.firstButton:v?o.lastButton:o.middleButton};return t.jsx(Oe,{role:"group",className:ee(o.root,m),ref:n,ownerState:j,...g,children:t.jsx(le.Provider,{value:E,children:R.map((i,l)=>t.jsx(de.Provider,{value:A(l),children:i},l))})})});function Me(){const{userData:e}=se(n=>n.auth),a={avatar:"/avatar.png",name:e==null?void 0:e.name,place:e==null?void 0:e.country,email:e==null?void 0:e.email};return t.jsx($,{children:t.jsx(H,{children:t.jsxs(oe,{sx:{borderRadius:"1rem",p:"1rem",boxShadow:"0 0px 0px 0 rgba(0, 0, 0, 0.19), 0 0px 8px 0 rgba(0, 0, 0, 0.19)"},children:[t.jsx($,{height:"250px",children:t.jsx("img",{src:"/profileBanner/profileBannerImg.jpg",alt:"Profile Banner",height:"100%",width:"100%",style:{borderRadius:"1rem"}})}),t.jsx($,{sx:{mx:{xs:"1rem",sm:"2rem"},mt:"-3rem"},children:Object.entries(a).map(([n,u])=>t.jsx($,{sx:{flexDirection:"row",alignItems:"center",gap:".5rem",wordBreak:"break-word"},children:n==="avatar"?t.jsx(ve,{alt:"User Avatar",src:u,sx:{width:100,height:100,bgcolor:"primary.main",mb:".5rem"}}):t.jsxs(t.Fragment,{children:[t.jsxs(G,{fontWeight:"bold",textTransform:"capitalize",children:[n,":"]}),t.jsx(G,{sx:{flex:1},children:u||"N/A"})]})},n))})]})})})}function Ve({toggleButtonSx:e,items:a,toggleButtonGroupSx:n,stackSx:u,onChange:c,active:m}){return t.jsx($,{sx:u,children:t.jsx(Re,{color:"primary",exclusive:!0,onChange:c,"aria-label":"Platform",sx:{color:"#989c9e",...n},children:a==null?void 0:a.map((p,x)=>t.jsx(Se,{value:p,sx:{borderBottom:m===p&&"2px solid primary.main",color:m===p&&"primary.main",textTransform:"capitalize",fontSize:"1rem",...e},children:p},x))})})}const We=q({name:z().trim().min(1,"User name or email is required"),email:z().trim().email("Please enter a valid email"),mobile:z().min(7,"Mobile number must be at least 7 digits")});function ce(){const e=Y(),{userData:a}=se(i=>i.auth),[n,u]=f.useState(null),[c,m]=f.useState(""),[p,x]=f.useState(null),C={name:(a==null?void 0:a.name)||"",email:(a==null?void 0:a.email)||"",mobile:(a==null?void 0:a.mobile)||""},{register:y,handleSubmit:b,reset:P,watch:w,setValue:s,setError:g,formState:{errors:j}}=_({resolver:Z(We),defaultValues:C}),[o,{isLoading:T}]=ge(),B=async i=>{var l,v;try{console.log(i);const r=await o(i).unwrap();console.log(r),r.status&&(e(fe(r==null?void 0:r.data)),e(S({open:!0,message:r==null?void 0:r.message,severity:"success"})))}catch(r){(l=r==null?void 0:r.data)!=null&&l.data&&e(S({open:!0,message:((v=r==null?void 0:r.data)==null?void 0:v.message)||"Failed to submit. Please try again later.",severity:"error"}))}},[E]=xe(),[R]=he();async function k(i){var l,v;try{u(i);const r=w(i),h=await E({[i]:r}).unwrap();h!=null&&h.status&&(e(S({open:!0,message:h==null?void 0:h.message,severity:"success"})),x(i))}catch(r){(l=r.data)!=null&&l.data?Object.entries(r.data.data).forEach(([h,I])=>{g(h,{type:"server",message:I})}):e(S({open:!0,message:((v=r==null?void 0:r.data)==null?void 0:v.message)||"Failed to submit. Please try again later.",severity:"error"}))}finally{u(null)}}async function A(i){var l,v;try{x(()=>i);const r=w(i==="email"?"email":"mobile"),h=await R({[i]:r,otp:c}).unwrap();h!=null&&h.status&&(e(S({open:!0,message:h==null?void 0:h.message,severity:"success"})),m(""),x(null),s(i,r),P(C))}catch(r){(l=r.data)!=null&&l.data?Object.entries(r.data.data).forEach(([h,I])=>{g(h,{type:"server",message:I})}):e(S({open:!0,message:((v=r==null?void 0:r.data)==null?void 0:v.message)||"Failed to submit. Please try again later.",severity:"error"}))}}return t.jsxs($,{mt:"2rem",gap:"2rem",component:"form",onSubmit:b(B),children:[t.jsxs(O,{container:!0,size:12,spacing:3,children:[t.jsxs(O,{item:!0,size:{xs:12,sm:6,md:4},children:[t.jsx(L,{sx:{mb:".5rem"},children:"Name"}),t.jsx(ye,{size:"small",placeholder:"Your name",fullWidth:!0,variant:"outlined",...y("name",{required:!0})})]}),t.jsxs(O,{item:!0,size:{xs:12,sm:6,md:4},children:[t.jsx(L,{sx:{mb:".5rem"},children:p==="email"?"Email otp":"Email"}),p==="email"?t.jsx(N,{size:"small",placeholder:"Your OTP",name:"otp",value:c,onChange:i=>m(i.target.value),fullWidth:!0,endAdornment:t.jsx(U,{position:"end",children:t.jsx(V,{onClick:()=>A("email"),disabled:!c,size:"small",variant:"contained",edge:"end",sx:{height:"100%",boxShadow:"none",bgcolor:"primary.main",color:"white",textTransform:"capitalize","&:hover":{boxShadow:"none"}},children:"Verify"})})}):t.jsx(N,{size:"small",placeholder:"Your email",...y("email",{required:!0}),fullWidth:!0,endAdornment:a!=null&&a.isEmailVerified?null:t.jsx(U,{position:"end",children:t.jsx(V,{onClick:()=>k("email"),disabled:n==="email",size:"small",variant:"contained",edge:"end",sx:{height:"100%",boxShadow:"none",bgcolor:"primary.main",color:"white",textTransform:"capitalize","&:hover":{boxShadow:"none"}},children:n==="email"?"Sending...":"Verify"})})})]}),t.jsxs(O,{item:!0,size:{xs:12,sm:6,md:4},children:[t.jsx(L,{sx:{mb:".5rem"},children:p==="mobile"?"Mobile otp":"Mobile"}),p==="mobile"?t.jsx(N,{size:"small",placeholder:"Your OTP",name:"otp",value:c,onChange:i=>m(i.target.value),fullWidth:!0,endAdornment:t.jsx(U,{position:"end",children:t.jsx(V,{onClick:()=>A("mobile"),disabled:!c,size:"small",variant:"contained",edge:"end",sx:{height:"100%",boxShadow:"none",bgcolor:"primary.main",color:"white",textTransform:"capitalize","&:hover":{boxShadow:"none"}},children:"Verify"})})}):t.jsx(N,{size:"small",placeholder:"Your mobile",...y("mobile",{required:!0}),fullWidth:!0,endAdornment:a!=null&&a.isMobileVerified?null:t.jsx(U,{position:"end",children:t.jsx(V,{onClick:()=>k("mobile"),disabled:n==="mobile",size:"small",variant:"contained",edge:"end",sx:{height:"100%",boxShadow:"none",bgcolor:"primary.main",color:"white",textTransform:"capitalize","&:hover":{boxShadow:"none"}},children:n==="mobile"?"Sending...":"Verify"})})})]})]}),t.jsx(V,{type:"submit",size:"small",disabled:T,variant:"contained",sx:{textTransform:"capitalize",boxShadow:"none",bgcolor:"primary.main",color:"white",alignSelf:"flex-start","&:hover":{boxShadow:"none"}},children:"Update"})]})}const ke=q({oldPassword:z().min(8,"Password must be at least 8 characters"),newPassword:z().min(8,"Password must be at least 8 characters"),cnfPassword:z().min(8,"Password must be at least 8 characters")}).refine(e=>e.newPassword===e.cnfPassword,{message:"Passwords do not match",path:["cnfPassword"]});function Ae(){const e=Y(),[a,n]=f.useState({oldPassword:!1,newPassword:!1,cnfPassword:!1}),u=s=>{n(g=>({...g,[s]:!g[s]}))},[c,{isLoading:m}]=be(),p={oldPassword:"",newPassword:"",cnfPassword:""},{register:x,handleSubmit:C,setError:y,reset:b,formState:{errors:P}}=_({resolver:Z(ke),defaultValues:p}),w=async s=>{var g,j;try{const o=await c(s).unwrap();o!=null&&o.status&&(b(p),e(S({open:!0,message:o==null?void 0:o.message,severity:"success"})))}catch(o){(g=o==null?void 0:o.data)!=null&&g.data?Object.entries(o.data.data).forEach(([T,B])=>{y(T,{type:"server",message:B})}):e(S({open:!0,message:((j=o==null?void 0:o.data)==null?void 0:j.message)||"Failed to submit. Please try again later.",severity:"error"}))}};return t.jsxs($,{mt:"2rem",gap:"2rem",component:"form",onSubmit:C(w),children:[t.jsx(O,{container:!0,size:12,spacing:3,children:["oldPassword","newPassword","cnfPassword"].map(s=>t.jsxs(O,{item:!0,size:{xs:12,sm:6,md:4},children:[t.jsx(L,{sx:{mb:".5rem"},children:s==="oldPassword"?"Current Password":s==="newPassword"?"New Password":"Confirm Password"}),t.jsx(N,{size:"small",...x(s),placeholder:"********",fullWidth:!0,type:a[s]?"text":"password",endAdornment:t.jsx(U,{position:"end",children:t.jsx(re,{"aria-label":`toggle ${s} visibility`,onClick:()=>u(s),edge:"end",children:a[s]?t.jsx(ne,{}):t.jsx(ie,{})})})}),P[s]&&t.jsx(G,{color:"error",children:P[s].message})]},s))}),t.jsx(V,{type:"submit",size:"small",variant:"contained",disabled:m,sx:{textTransform:"capitalize",boxShadow:"none",bgcolor:"primary.main",color:"white",alignSelf:"flex-start","&:hover":{boxShadow:"none"}},children:"Update"})]})}const Ne=q({prevPassword:z().min(8,"Password must be at least 8 characters").regex(/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[\W_]).{8,}$/,"Password must contain at least one digit, one lowercase letter, one uppercase letter, and one special character"),newPassword:z().min(8,"Password must be at least 8 characters").regex(/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[\W_]).{8,}$/,"Password must contain at least one digit, one lowercase letter, one uppercase letter, and one special character"),cnfPassword:z().min(8,"Password must be at least 8 characters").regex(/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[\W_]).{8,}$/,"Password must contain at least one digit, one lowercase letter, one uppercase letter, and one special character")}).refine(e=>e.newPassword===e.cnfPassword,{message:"Passwords do not match",path:["cnfPassword"]});function Ue(){const e=Y(),[a,n]=f.useState({currPassword:!1,newPassword:!1,cnfPassword:!1}),u=s=>{n(g=>({...g,[s]:!g[s]}))},[c,{isLoading:m}]=we(),p={prevPassword:"",newPassword:"",cnfPassword:""},{register:x,handleSubmit:C,setError:y,reset:b,formState:{errors:P}}=_({resolver:Z(Ne),defaultValues:p}),w=async s=>{var g,j;try{const o=await c(s).unwrap();o!=null&&o.status&&(b(p),e(S({open:!0,message:o==null?void 0:o.message,severity:"success"})))}catch(o){(g=o==null?void 0:o.data)!=null&&g.data?Object.entries(o.data.data).forEach(([T,B])=>{y(T,{type:"server",message:B})}):e(S({open:!0,message:((j=o==null?void 0:o.data)==null?void 0:j.message)||"Failed to submit. Please try again later.",severity:"error"}))}};return t.jsxs($,{mt:"2rem",gap:"2rem",component:"form",onSubmit:C(w),children:[t.jsx(O,{container:!0,size:12,spacing:3,children:["prevPassword","newPassword","cnfPassword"].map(s=>t.jsxs(O,{item:!0,size:{xs:12,sm:6,md:4},children:[t.jsx(L,{sx:{mb:".5rem"},children:s==="prevPassword"?"Current Transaction Password":s==="newPassword"?"New Transaction Password":"Confirm Transaction Password"}),t.jsx(N,{size:"small",...x(s),placeholder:"********",fullWidth:!0,type:a[s]?"text":"password",endAdornment:t.jsx(U,{position:"end",children:t.jsx(re,{"aria-label":`toggle ${s} visibility`,onClick:()=>u(s),edge:"end",children:a[s]?t.jsx(ne,{}):t.jsx(ie,{})})})}),P[s]&&t.jsx(G,{color:"error",children:P[s].message})]},s))}),t.jsx(V,{type:"submit",size:"small",variant:"contained",disabled:m,sx:{textTransform:"capitalize",boxShadow:"none",bgcolor:"primary.main",color:"white",alignSelf:"flex-start","&:hover":{boxShadow:"none"}},children:"Update"})]})}const K={Profile:ce,"Change Profile Password":Ae,"Change Transaction Password":Ue};function Ee(){const[e,a]=f.useState("Profile");function n(c){c&&a(c)}const u=K[e]||ce;return t.jsx($,{mt:"2rem",children:t.jsx(H,{children:t.jsxs(oe,{sx:{borderRadius:"1rem",p:{xs:"1rem",sm:"2rem"},boxShadow:"0 0px 0px 0 rgba(0, 0, 0, 0.19), 0 0px 8px 0 rgba(0, 0, 0, 0.19)"},children:[t.jsx(Ve,{toggleButtonSx:{borderTop:"none",borderLeft:"none",borderRight:"none",borderRadius:"0"},toggleButtonGroupSx:{flexDirection:{xs:"column",sm:"row"}},stackSx:{borderBottom:"1px solid #989c9e"},items:Object.keys(K),onChange:(c,m)=>n(m),active:e}),t.jsx(u,{})]})})})}function Ze(){return t.jsxs($,{mb:"4rem",mt:"100px",children:[t.jsx(H,{children:t.jsx(G,{variant:"h4",fontWeight:"bold",mb:"2rem",children:"Profile"})}),t.jsx(Me,{}),t.jsx(Ee,{})]})}export{Ze as default};
