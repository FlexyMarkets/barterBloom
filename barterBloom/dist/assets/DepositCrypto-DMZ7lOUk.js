import{i as y,Z as b,r as w,a7 as A,j as e,U as E,T as l,a8 as R,a9 as W,X as B,k as D,aa as F,S as p,C as T,n as C,Y as L,e as M,o as z,B as I,q as g,ab as k,G as v,p as H,t as V,v as N}from"./index-1QpN_kPN.js";import"./dayjs.min-CBv5XiHG.js";import{C as q}from"./ContentCopyOutlined-BjveEq34.js";import{T as P}from"./Tooltip-DPWfOvdG.js";import{T as O}from"./TextField-Dv5LwExk.js";import{D as Q}from"./Divider-D5oVa8dZ.js";import"./Menu-BFTqPCo2.js";import"./List-BmCte5Bj.js";import"./Popper-Ce7wbqwZ.js";import"./Select-DAT7I1mX.js";import"./FormControl-C64Vdjd_.js";import"./dividerClasses-CWLRNbSi.js";const U=1*60*1e3;function G(){const o=y(),r=b(t=>t.wallet.hasTimedOut),d=b(t=>t.wallet.countdownEndTime),[a,u]=w.useState(0);w.useEffect(()=>{if(r){u(0);return}let t=d;t||(t=Date.now()+U,o(A(t)));const n=()=>{const h=Date.now(),c=Math.max(0,Math.floor((t-h)/1e3));u(c),c<=0&&(clearInterval(m),o(R(!0)),o(W()))};n();const m=setInterval(n,1e3);return()=>clearInterval(m)},[o,r,d]);const x=t=>{const n=String(Math.floor(t/60)).padStart(2,"0"),m=String(t%60).padStart(2,"0");return`${n}:${m}`};return e.jsxs(E,{sx:{display:"flex",gap:".5rem",alignItems:"center"},children:[e.jsx(l,{children:"Time Left:"}),e.jsx(l,{fontSize:"1.2rem",fontWeight:600,color:r?"error":"text.primary",children:r?"Time Out":x(a)})]})}function $(){const o=B("(max-width:500px)"),r=y(),{depositQRData:d}=b(f=>f.wallet),a=d,[u,x]=w.useState(!1),t=f=>{navigator.clipboard.writeText(f),x(!0),setTimeout(()=>{x(!1)},1500)},{register:n,handleSubmit:m,reset:h}=D({defaultValues:{transactionHash:""}}),[c,{isLoading:j}]=F(),s=async f=>{var S;try{const i=await c(f).unwrap();i!=null&&i.status&&(h(defaultValues),r(g({open:!0,message:i==null?void 0:i.message,severity:"success"})))}catch(i){i!=null&&i.data&&r(g({open:!0,message:((S=i==null?void 0:i.data)==null?void 0:S.message)||"Failed to submit. Please try again later.",severity:"error"}))}};return e.jsx(p,{mt:"2rem",children:e.jsx(T,{children:e.jsx(C,{sx:{boxShadow:"0 0px 0px 0 rgba(0, 0, 0, 0.19), 0 0px 8px 0 rgba(0, 0, 0, 0.19)",borderRadius:"2rem",height:"100%",padding:{xs:"1rem",md:"2rem"}},component:"form",onSubmit:m(s),children:e.jsxs(L,{sx:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",gap:"1rem",wordBreak:"break-word"},children:[e.jsx(l,{variant:"h6",children:"Scan QR Code to Complete Deposit"}),a?e.jsx("img",{src:a==null?void 0:a.data,alt:"Deposit QR",style:{maxWidth:"150px",width:"100%",height:"auto",border:"1px solid #ccc",borderRadius:"8px"}}):e.jsx(l,{color:"text.secondary",children:"QR Code not available"}),e.jsx(G,{}),e.jsxs(p,{sx:{flexDirection:"row",alignItems:"center"},children:[e.jsxs(l,{children:["Deposit Address: ",a==null?void 0:a.depositAddress]}),e.jsx(P,{title:u?"Copied!":"Copy",children:e.jsx(M,{onClick:()=>t(a==null?void 0:a.depositAddress),children:e.jsx(q,{sx:{fontSize:"20px"}})})})]}),e.jsxs(p,{width:o?"100%":"400px",children:[e.jsx(z,{sx:{mb:".5rem"},children:"Transaction hash"}),e.jsx(O,{multiline:!0,...n("transactionHash",{require:!0}),size:"small",fullWidth:!0,placeholder:"Transaction hash",variant:"outlined"}),e.jsx(I,{variant:"contained",size:"small",type:"submit",disabled:j,sx:{textTransform:"capitalize",width:"5rem",mt:"1rem",boxShadow:"none",bgcolor:"primary.main",fontSize:"1rem",color:"white","&:hover":{boxShadow:"none"}},children:"Verify"})]})]})})})})}const X=V({amount:N().min(1,"Please type your deposit amount")});function Y(){const{countdownEndTime:o}=b(c=>c.wallet),r=y(),d={amount:""},{register:a,handleSubmit:u,reset:x,formState:{errors:t}}=D({resolver:H(X),defaultValues:d}),[n,{isLoading:m}]=k(),h=async c=>{var j;try{const s=await n(c).unwrap();s!=null&&s.status&&(x(d),r(g({open:!0,message:s==null?void 0:s.message,severity:"success"})))}catch(s){s!=null&&s.data&&r(g({open:!0,message:((j=s==null?void 0:s.data)==null?void 0:j.message)||"Failed to submit. Please try again later.",severity:"error"}))}};return e.jsx(p,{mt:"1.2rem",children:e.jsx(T,{children:e.jsxs(C,{sx:{padding:{xs:"1rem",sm:"2rem"},borderRadius:"2rem",boxShadow:"0 0px 0px 0 rgba(0, 0, 0, 0.19), 0 0px 8px 0 rgba(0, 0, 0, 0.19)"},children:[e.jsx(l,{variant:"h6",m:{xs:"1rem",sm:"0"},children:"Fill details"}),e.jsx(Q,{sx:{my:"1.2rem"}}),e.jsxs(p,{gap:"2rem",component:"form",onSubmit:u(h),children:[e.jsx(v,{container:!0,size:12,spacing:3,children:e.jsxs(v,{item:!0,size:{xs:12,sm:6},children:[e.jsx(z,{sx:{mb:".5rem"},children:"Amount to be deposit"}),e.jsx(O,{...a("amount",{require:!0}),size:"small",fullWidth:!0,placeholder:"Amount to be deposit",variant:"outlined"}),t.amount&&e.jsx(l,{color:"error",children:t.amount.message})]})}),e.jsx(I,{variant:"contained",size:"small",type:"submit",disabled:m||o,sx:{textTransform:"capitalize",width:"5rem",boxShadow:"none",bgcolor:"primary.main",fontSize:"1rem",color:"white","&:hover":{boxShadow:"none"}},children:"Submit"})]})]})})})}function me(){const{depositQRData:o}=b(r=>r.wallet);return e.jsxs(p,{mt:"100px",children:[e.jsx(T,{children:e.jsx(l,{variant:"h4",fontWeight:"bold",mb:"2rem",children:"Deposit Balance"})}),e.jsx(Y,{}),o&&e.jsx($,{})]})}export{me as default};
